<h2 align="center"><strong> ФЕДЕРАЛЬНОЕ ГОСУДАРСТВЕННОЕ 
<br>ОБРАЗОВАТЕЛЬНОЕ УЧРЕЖДЕНИЕ ВЫСШЕГО ОБРАЗОВАНИЯ
<br>«НАЦИОНАЛЬНЫЙ ИССЛЕДОВАТЕЛЬСКИЙ УНИВЕРСИТЕТ
<br>"ВЫСШАЯ ШКОЛА ЭКОНОМИКИ"»</strong></h2>
<br><br>
<h3 align="center">Московский институт электроники и математики
<br>им. А.Н. Тихонова НИУ ВШЭ</h3>
<h3 align="center">Департамент компьютерной инженерии
<br>Курс: Python в науке данных</h3>
<br>
<h2 align="center"><strong>Поиск целевой аудитории магазина</strong></h2>
<h4 align="center">Над проектом работали студенты БИВ237:
<br><i>Чашкин Фёдор Борисович
<br>Родманич Василий Александрович
<br>Коршун Владислав Игоревич</i></h4>
<br>
<h4 align="center">Научный руководитель:
<br><i>Ролич Алексей Юрьевич</i></h4>
<br><br>
<p align="center">МОСКВА 2024</p>

---

# Документация разработчика программы для поиска целевой аудитории магазина

## Содержание
1. Введение
2. Архитектура программного обеспечения
3. Взаимодействие с данными
4. Описание классов, функций и методов
5. Методика испытаний и тестирования
6. Результаты тестирования
7. Функциональные результаты работы ПО
8. Требования к среде
- Установка программы

---

## 1. Введение
Программное обеспечение предназначено для анализа покупательского поведения и определения целевой аудитории магазина.
Оно позволяет пользователям загружать датасеты с данными о покупках и автоматически обрабатывает эти данные
для создания информативных графиков и диаграмм.

## 2. Архитектура программного обеспечения
Общая структура проекта:

### Корневой каталог
- `app.py` - исходный файл с программой;
  - `/assets` - папка со стилями css;
  - `/data` - папка с пробными датасетами, на которых проводились тестирования;
- `USER_README.md` - документация пользователя;
- `DEVELOPER_README.md` - документация пользователя;
- `.gitignore` - игнорирование файлов, которые не должны попасть на репозиторий;
- `requirements.txt` - файл с нужными библиотеками.

## 3. Взаимодействие с данными:
Пользователь загружает файл датасет следующего формата:

* id — номер транзакции;
* gender — пол покупателя;
* age — возраст покупателя;
* week_day — день недели, в который была совершена транзация;
* amount — сумма покупки;
* time — время, в которое была совершена транзация.

Программа анализирует таблицу и на основе этих данных формирует несколько диаграмм:
1. Круговая диаграмма "Мужчина-женщина" с указанием пола, процент которого участвует в покупках;
2. Столбчатая диаграмма "Возраст", в которой написано, люди какой возрастной категории
чаще всего совершают транзакции;
3. "Дни недели" — столбчатая диаграмма. В ней приложение рисует столбцы дней недели,
пропорциональные количеству сделанных покупок в данное время.
4. Общий вывод, двойная столбчатая диаграмма, в которой учитываются люди
разных возрастных групп, разного пола. На их основе вычисляется
целевая аудитория магазина, которая тратит больше всего денег.

## 4. Описание классов, функций и методов

В программе реализован ряд функций и методов:

* app_layout — вывод визуальной части сайта на экран (текста, кнопок, графиков, диаграмм);
* parse_contents(contents, filename, date) — функция, которая подготавливает датафрейм,
загружая его из файла пользователя, преобразуя в удобный для анализа вид (из `.csv` или `.xls`);
* @app.callback — это декоратор для создания обратного вызова. Он вызывает функцию при изменении
значения в Input, а в результате изменяет значения в Output, то есть
выходные данные обновляются в ответ на изменения входных данных.
* update_output(contents, filename, date) — функция, преобразующая датасет для того, чтобы
его было удобно вывести в виде диаграмм: сортирует его по возрастанию возрастных групп;
* generate_table(dataframe, max_rows=10) — функция, которая выводит датафрейм на экран сайта пользователя
  (до десяти строчек включительно).

## 5. Методика испытаний и тестирования

Для проверки работоспособности приложения было проведено тестирование по следующей методике:
1. Был создан ряд тестовых датафреймов для опредления различных зависимостей.
2. Каждый из них был поочерёдно загружен в приложение.
3. Полученные значения были проанализированы и сверены с результатами.

## 6. Результаты тестирования

В результате тестирования команда столкнулась с рядом проблем и ошибок:
1. После загрузки файла не отображались диаграммы.
- Ошибка была связана с неправильной логикой функции (исправлено).
2. Нарушилась ориентация страницы.
- Стиль .css был некорректно написан (исправлено).
3. Возникли сложности с развёртыванием сайта на сервере.
- Проблема заключалась в том, что сайт имел ограниченный доступ к ресурсам программы (исправлено).

В конце концов, приложение стало работать исправно.

## 7. Функциональные результаты работы ПО

Программное обеспечение "Анализ данных продуктового магазина" предназначено для интерактивного анализа данных
о покупках, позволяя пользователям загружать свои собственные наборы данных и визуализировать ключевые метрики
и тенденции. Основные функциональные возможности ПО включают:

1. **Загрузка данных**:
    - Пользователи могут загружать данные о покупках в формате CSV или Excel;
    - Программа обрабатывает загруженные данные, преобразуя их в DataFrame.

2. **Отображение исходных данных**:
    - Загруженный набор данных отображается в виде таблицы, что позволяет пользователям быстро ознакомиться с исходными данными.

3. **Визуализация данных**:
    - **Распределение по полу**:
        - Данные визуализируются в виде круговой диаграммы, показывающей распределение покупателей по полу (мужчины и женщины).
    - **Возрастное распределение**:
        - Данные отображаются в виде гистограммы, показывающей распределение покупателей по возрастным группам.
    - **Распределение по дням недели**:
        - Визуализация данных в виде гистограммы, отображающей, в какие дни недели чаще всего совершаются покупки.
    - **Потраченная сумма по возрасту и полу**:
        - Данные визуализируются в виде столбчатой диаграммы, показывающей потраченную сумму в зависимости от возрастной группы и пола.

4. **Обработка и анализ данных**:
    - Программа автоматически создает возрастные группы, распределяя покупателей по предустановленным возрастным диапазонам.
    Данные сортируются и обрабатываются для улучшения визуализации и анализа.

5. **Интерактивный интерфейс**:
    - Пользовательский интерфейс построен с использованием Dash и Plotly. 
    Веб-приложение позволяет пользователям загружать новые наборы данных и мгновенно видеть обновленные результаты анализа.

### Пример использования

1. Пользователь загружает файл с данными о покупках (CSV или Excel) через интерфейс веб-приложения.
2. Программа обрабатывает загруженные данные, отображает исходный набор данных в виде таблицы и создает визуализации.
3. Пользователь может изучать различные аспекты данных через интерактивные графики, предоставляющие информацию о распределении по полу, возрасту, дням недели и суммам потраченных средств.

Эти функциональные возможности позволяют пользователям эффективно анализировать данные о покупках, выявлять тенденции и принимать обоснованные решения на основе полученной информации.

## 8. Требования к среде

Среда, в которой работает ПО, имеет незначительные требования.
Для установки приложения необходим ряд библиотек, которые описаны в файле `requirements.txt`.
(см. раздел *Установка программы*). Программа протестирована и корректно работает
на операционных системах Windows 10, Windwos 11 и MacOS 14.5 и версии Python 3.8 и новее.

---

# Установка программы

1. Зайти на git-репозиторий и ознакомиться с материалами проекта:
```
https://github.com/vasiliyrod/shop-analyser
```
2. Скопировать url (`https://github.com/vasiliyrod/shop-analyser.git`) и
склонировать репозиторий на локальное устройство.
3. Создать виртуальное окружение и активировать его. (см раздел *Создание виртуального окружения*)
4. Установить необходимые библиотеки для работы с приложением.
Написать в командной строке, находясь в папке с программой, следующую команду:
```
pip install -r requirements.txt
```
После выполнения данной команды установятся все библиотеки, находящиеся в файле `requirements.txt`.

## Создание виртуального окружения
Чтобы создать виртуальное окружение, необходимо воспользоваться командой `python -m venv <имя окружения>`. Например, если назвать его именем `venv`, то в консоль нужно ввести следующее:
```
python -m venv venv
```
### Активация виртуального окружения
Чтобы начать пользоваться виртуальным окружением, необходимо его активировать. В разных операционных системах это делается по-разному.
#### Windows
Находясь в папке с проектом, необходимо ввести в консоль следующую команду:
```
venv/Scripts/activate
```
#### Linux и MacOS
Находясь в папке с проектом, необходимо ввести в консоль следующую команду:
```
source venv/bin/activate
```
